<%= flash[:notice] %>

<p id="notice"></p>

<div class = 'container'>

  <% if @book.errors.any? %>
    <h3><%= @book.errors.count %> errors prohibited this obj from being saved:</h3>
    <ul>
      <% @book.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  <% end %>

  <div class = 'row'>
    <div class = 'col-md-3'>

    <%= render 'list', user: @user %>

    <div class = 'col-md-8 offset-md-1'>
       <h2>Book detail</h2>

      <table class="table">
        <tbody>
          <% @book = Book.find(params[:id]) do %>
            <tr>
              <td>
                <%= link_to user_path(@user.id) do %>
                  <% if @book.user.image.attached? %>
                    <%= image_tag @book.user.image, size: "100x100" %>
                  <% else %>
                    <%= image_tag 'no_image', size: "100x100" %>
                  <% end %><br>
                  <%= @user.name %>
                <% end %>
              </td>
              <td>
                <%= link_to @book.title , book_path(@book.id) %>
              </td>
              <td>
                <%= @book.body %>
              </td>
                <% if @book.user == current_user %>
                  <td>
                    <%= link_to 'Edit' , edit_book_path(@book.id) , class: "btn btn-sm btn-success" %>
                  </td>
                  <td>
                    <%= link_to 'Destroy' , book_path(@book.id) , class: "btn btn-sm btn-danger" , method: :delete, "data-confirm" => "本当に削除しますか？" %>
                  </td>
                <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

